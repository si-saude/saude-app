<head>
<meta charset="utf-8">
</head>

	<div class="row col s12">
	<div class="input-field col s4">
			<fieldset>
				<label for="enfase">Ênfase</label> <input
					type="text" materialize="autocomplete" autocomplete="off"
					name="mudancaFuncao.enfase.descricao"
					[required]="(mudancaFuncao.id == 0)"
					[(ngModel)]="mudancaFuncao.enfase.descricao"
					(blur)="autoCompleteEnfase.getAutocomplete().getObj($event,mudancaFuncao,'setEnfase','getDescricao')"
					(ngModelChange)="autoCompleteEnfase.getAutocomplete().getList(mudancaFuncao.enfase, 'getDescricao');"
					(keydown.enter)="autoCompleteEnfase.getAutocomplete().pressEnter($event,mudancaFuncao,'setEnfase','getDescricao')"
					[materializeParams]="autoCompleteEnfase.getAutocomplete().getObjAutoComplete()">
					</fieldset>
    </div>
    <div class="input-field col s4">
			<fieldset>
				<label for="funcao">Função</label> <input
					type="text" materialize="autocomplete" autocomplete="off"
					[required]="(mudancaFuncao.id == 0)"
					name="mudancaFuncao.funcao.nome"
					[(ngModel)]="mudancaFuncao.funcao.nome"
					(blur)="autoCompleteFuncao.getAutocomplete().getObj($event,mudancaFuncao,'setFuncao','getNome')"
					(ngModelChange)="autoCompleteFuncao.getAutocomplete().getList(mudancaFuncao.funcao, 'getNome');"
					[materializeParams]="autoCompleteFuncao.getAutocomplete().getObjAutoComplete()">
					</fieldset>
    </div>
        <div class="input-field col s4">
			<fieldset>
				<label for="dataTransferencia">Data de Transferência</label> 
					<app-date-picker [nome]="dataTransferencia" 
					[customDate]="mudancaFuncao.dataTransferenciaCustomDate" 
					[obrigatorio]="'true'"
					[desabilitar]="(mudancaFuncao.id > 0)"
					[legenda]="Data"									
					></app-date-picker>	
			</fieldset>
    </div>
	</div>
	<div class="row col s12" *ngIf="(mudancaFuncao.id > 0)">
		<div class="input-field col s6">
					<fieldset>
						<label for="mudancaFuncao.ghe" >GHE</label> 						
						<input type="text" materialize="autocomplete" autocomplete="off"
						name="mudancaFuncao.ghe.nome"
						[readonly]="desabilitarGhe"
						[(ngModel)]="mudancaFuncao.ghe.nome"
						(blur)="autoCompleteGhe.getAutocomplete().getObj($event,mudancaFuncao,'setGhe','getNome')"
						(ngModelChange)="autoCompleteGhe.getAutocomplete().getList(mudancaFuncao.ghe, 'getNome');"
						[materializeParams]="autoCompleteGhe.getAutocomplete().getObjAutoComplete()"
						(dblclick)="modalDisplayTextComponent2.openModal(mudancaFuncao.ghe.risco.titulo)">
					</fieldset>
		</div>
		<div class="input-field col s6">
				<fieldset>
					<label for="ghee">GHEE</label> <input
						type="text" materialize="autocomplete" autocomplete="off"
						name="mudancaFuncao.ghee.nome"
						[readonly]="desabilitarGhee"
						[(ngModel)]="mudancaFuncao.ghee.nome"
						(blur)="autoCompleteGhee.getAutocomplete().getObj($event,mudancaFuncao,'setGhee','getNome')"
						(ngModelChange)="autoCompleteGhee.getAutocomplete().getList(mudancaFuncao.ghee, 'getNome');"
						[materializeParams]="autoCompleteGhee.getAutocomplete().getObjAutoComplete()"
						(dblclick)="modalDisplayTextComponent2.openModal(mudancaFuncao.ghee.descricao)">
						</fieldset>
	    </div>	
	</div>
	<div class="row col s12">
		<div class="input-field col s4">
			<fieldset>
				<label for="gerencia">Gerência</label> <input
					type="text" materialize="autocomplete" autocomplete="off"
					name="mudancaFuncao.gerencia.codigoCompleto"
					[required]="(mudancaFuncao.id == 0)"
					[(ngModel)]="mudancaFuncao.gerencia.codigoCompleto"
					(blur)="autoCompleteGerencia.getAutocomplete().getObj($event,mudancaFuncao,'setGerencia','getCodigoCompleto')"
					(ngModelChange)="autoCompleteGerencia.getAutocomplete().getList(mudancaFuncao.gerencia, 'getCodigoCompleto');"
					[materializeParams]="autoCompleteGerencia.getAutocomplete().getObjAutoComplete()">
					</fieldset>
       </div>
	   <div class="input-field col s4">
			<fieldset>
				<label for="base">Base</label> <input
					type="text" materialize="autocomplete" autocomplete="off"
					name="mudancaFuncao.base.nome"
					[required]="(mudancaFuncao.id == 0)"
					[(ngModel)]="mudancaFuncao.base.nome"
					(blur)="autoCompleteBase.getAutocomplete().getObj($event,mudancaFuncao,'setBase','getNome')"
					(ngModelChange)="autoCompleteBase.getAutocomplete().getList(mudancaFuncao.base, 'getNome');"
					[materializeParams]="autoCompleteBase.getAutocomplete().getObjAutoComplete()">
					</fieldset>
       </div>
       <div class="input-field col s4">
			<fieldset>
				<label for="base">Regime</label>
   						<select name="regime" class="browser-default"
   						[required]="(mudancaFuncao.id == 0)"
						[(ngModel)]="mudancaFuncao.regime.id">
						<option disabled selected value=0>Selecione um regime</option>
						<option *ngFor="let regime of regimes" value="{{regime.id}}">{{regime.nome}}</option>
						</select>
			</fieldset>
	    </div>
    </div>				
    <div class="row col s12">
		<div class="input-field col s12">
			<fieldset>
				<label for="atividades">Atividades</label>
				<textarea class="materialize-textarea" 
						[(ngModel)]="mudancaFuncao.atividades" name="atividades"></textarea>
			</fieldset>
		</div>
	</div>
	<div class="row col s12">
	<div class="input-field col s12">
		<fieldset>
			<legend>
				Grupos Monitoramento <a
					class="btn-floating waves-effect waves-light green btn-add-fieldset"
					(click)="getGruposMonitoramento()"> <i
					class="material-icons center-icon">cached</i>
				</a>
			</legend>
			<div class="row row-curso">
				<div class="input-field col s5">
					<select name="grupoMonitoramento.id" class="browser-default" [(ngModel)]="grupoMonitoramento.id">
						<option disabled selected value=null>Selecione um grupo monitoramento</option>
						<option *ngFor="let grupoMonitoramento of gruposMonitoramento" value="{{grupoMonitoramento.id}}">{{grupoMonitoramento.nome}}</option>
					</select>
				</div>
				<div class="col s2">
					<a class="btn-floating waves-effect waves-light green btn-add"
						(click)="addGrupoMonitoramento()">
						<i class="material-icons center-icon">add</i>
					</a>
				</div>
			</div>
	
			<div class="row" style="margin-top:5% ">
	
				<table class="striped">
					<thead>
						<tr class="row col s12">
							<th class="col s11">Nome</th>
							<th class="col s1">Remoção</th>
						</tr>
					</thead>
					<div
						*ngFor="let grupoMonitoramentoAux of mudancaFuncao.grupoMonitoramentos;let i = index">
						<tbody class="col s12">
							<tr class="col s12">
								<td class="col s11 grupo-monitoramento-nome">{{grupoMonitoramentoAux.nome}}</td>
								<td class="col s1 botao-remover"><a
									class="waves-effect waves-light"
									(click)="removeGrupoMonitoramento(i)"> <i
										class="material-icons center-icon">delete</i>
								</a></td>
							</tr>
						</tbody>
					</div>
	
				</table>
	
			</div>
		</fieldset>
	</div>	
</div>	
	
	<div class="row">
		<div class="col s9">
		</div>		
		<div class="input-field col s3">
			<p>
				<a class="btn-floating waves-effect waves-light green btn-add"
					(click)="addInstalacao()"> <i
					class="material-icons center-icon">add</i>
			  	</a>
	        	<label style="color: #26a69a;">Adicionar Instalação</label>
	    	</p>
		</div>
	</div>		
    <div class="row">
			<table class="striped">
				<thead>
					<tr class="row col s12">
						<th class="col s7">Instalações</th>
						<th class="col s3">Base</th>
						<th class="col s1">UF</th>
						<td class="col s1">Remover</td>		
					</tr>
				</thead>
				<div *ngFor="let instalacao of mudancaFuncao.instalacoes;let i = index">
					<tbody class="col s12">
						<tr class="col s12">
							<td class="col s7">{{instalacao.nome}}</td>
							<td class="col s3">{{instalacao.base.nome}}</td>
							<td class="col s1">{{instalacao.base.uf}}</td>		
							<td class="col s1">
								<a class="waves-effect"
									(click)="removeInstalacao(i)"> 
									<i class="material-icons center-icon">delete</i>
								</a>
							</td>									
						</tr>
					</tbody>
				</div>
			</table>
	</div>
	<!-- Modal Structure -->
<div id="modal" class="modal" materialize="modal"
	[materializeParams]="modelParams" [materializeActions]="modalInstalacao">


	<div class="row row-modal-instalacao">
		<div class="input-field col s11">
				<fieldset>
					<legend>Instalacao</legend>
					<select name="tipo" class="browser-default" [(ngModel)]="instalacao.id">
						<option disabled selected value="">Selecione uma instalação</option>
						<option *ngFor="let instalacaoAux of instalacoes" value="{{instalacaoAux.id}}">{{instalacaoAux.nome}}</option>
					</select>
				</fieldset>
		</div>
		<div class="modal-footer">
			<a class="waves-effect waves-green btn-flat" (click)="closeModal()">Fechar</a>
			<a class="modal-action modal-close waves-effect waves-green btn-flat"
				(click)="confirmAddInstalacao()">Confirmar</a>
		</div>
	</div>

</div>
	
<app-modal-display-text></app-modal-display-text>