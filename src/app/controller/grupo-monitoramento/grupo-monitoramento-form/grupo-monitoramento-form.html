<head>
<meta charset="utf-8">
</head>
<div class="center-align">
	<h5 [ngClass]="corTitulo">Grupo Monitoramento</h5>
</div>

<!-- Preload  
<app-preload [msg]="msgPreload" [show]="showPreload"></app-preload>-->

<!-- Confirm Save 
<app-confirm-save [show]="showConfirmSave" [msg]="msgConfirmSave" [goTo]="goTo"></app-confirm-save> -->

<div class="row form-container">
	<form class="col s12" (ngSubmit)="save()">

		<div class="row">
		
		<div class="row">
			<div class="col s12">
				<ul class="tabs" materialize="tabs">
					<li class="tab col s6"><a RouterLinkActive="active"
						href="#dadosGerais">Dados Gerais</a></li>
					<li class="tab col s6"><a RouterLinkActive="active"
						href="#informacoesAdicionais">Informações Adicionais</a></li>
				</ul>
			</div>
		</div>
			
			<div id="dadosGerais">
				<div class="row">

					<div class="input-field col s12">
						<label for="nome">Nome</label> <input id="nome" type="text"
							[(ngModel)]="grupoMonitoramento.nome"
							name="grupoMonitoramento.nome">
					</div>

					<div class="input-field col s8">
						<fieldset>
							<legend>Tipo Grupo Monitoramento</legend>
							<select name="grupoMonitoramento.tipoGrupoMonitoramento"
								class="browser-default"
								[(ngModel)]="grupoMonitoramento.tipoGrupoMonitoramento.id">
								<option disabled selected value=0>Selecione um tipo grupo monitoramento</option>
								<option
									*ngFor="let tipoGrupoMonitoramento of tiposGrupoMonitoramento"
									value="{{tipoGrupoMonitoramento.id}}">{{tipoGrupoMonitoramento.nome}}</option>
							</select>
						</fieldset>
					</div>


				</div>
			</div>

			<div id="informacoesAdicionais">
			
				<fieldset>
					<legend class="legend">
						Grupos Monitoramento Exames <a
							class="btn-floating waves-effect waves-light green btn-add-permissoes"
							(click)="addGrupoMonitoramentoExame()"> <i class="material-icons center-icon">add</i>
						</a>
					</legend>
					<div class="form-group">
						<div
							*ngFor="let vacina of grupoMonitoramento.grupoMonitoramentoExames;let i = index">

							<fieldset>
								<legend class="legend">
									Grupo Monitoramento Exame <a
										class="btn-floating waves-effect waves-light red btn-add-permissoes"
										(click)="removeGrupoMonitoramentoExame(i)"> <i
										class="material-icons center-icon">delete</i>
									</a>
								</legend>

								<div class="row">
									<div class="input-field col s8">
										<fieldset>
											<legend>Exame</legend>
											<select
												name="grupoMonitoramento.exame[{{i}}].id"
												class="browser-default"
												[(ngModel)]="grupoMonitoramento.grupoMonitoramentoExames[i].exame.id">
												<option disabled selected value=0>Selecione um exame</option>
												<option *ngFor="let exame of exames" value="{{exame.id}}">{{exame.descricao}}</option>
											</select>
										</fieldset>
									</div>
								</div>
								
								<fieldset>
									<legend>Criterios</legend>
									<div class="row row-curso">
						
										<div class="input-field col s4">
											<select class="browser-default" #criterio>
												<option disabled selected value=0>Selecione um criterio</option>
												<option *ngFor="let criterio of criterios" value="{{criterio.id}}">{{criterio.nome}}</option>
						
											</select>
										</div>
						
										<div class="col s2">
											<a
												class="btn-floating waves-effect waves-light green btn-remove-permission"
												(click)="addCriterio(i, criterio.value)"> <i
												class="material-icons center-icon">add</i>
											</a>
										</div>
						
						
									</div>
						
									<div class="row">
						
											<table class="striped">
												<thead>
													<tr class="row col s12">
														<th class="col s3">Nome</th>
														<th class="col s3">Tipo</th>
														<th class="col s3">Remover</th>
													</tr>
												</thead>
												<div *ngFor="let criterio of grupoMonitoramento.grupoMonitoramentoExames[i].criterios;let iCriterio = index">
													<tbody class="col s12">
														<tr class="col s12">
															<input type="hidden" [(ngModel)]="criterio.nome"
																value="{{criterio.nome}}" name="criterio[{{iCriterio}}].nome">
															<input type="hidden" [(ngModel)]="criterio.tipo"
																value="{{criterio.tipo}}" name="criterio[{{iCriterio}}].tipo">
															<input type="hidden" [(ngModel)]="criterio.id"
																value="{{criterio.id}}" name="criterio[{{iCriterio}}].id">
															<td class="col s3">{{criterio.nome}}</td>
															<td class="col s3">{{criterio.tipo}}</td>
															<td class="col s3"><a
																class="btn-floating waves-effect waves-light red btn-remove"
																(click)="removeCriterio(i, iCriterio)"> <i
																	class="material-icons center-icon">delete</i>
															</a></td>
														</tr>
													</tbody>
												</div>
						
											</table>
						
									</div>
								</fieldset>

							</fieldset>
						</div>

					</div>

				</fieldset>
				
			</div>
			
			
		</div>

		<input id="id" name="id" type="hidden"
			[(ngModel)]="grupoMonitoramento.id"> 
		<input id="version" name="version" type="hidden" 
			[(ngModel)]="grupoMonitoramento.version">
			
		<div class="mensagem">
			<app-mensagem-form *ngIf="verifyError" [color]="colorError" [msg]="msgError"></app-mensagem-form>
		</div>

		<div class='row row-btns'>
			<div class="col s6">
				<button type="submit" class="btn btn-primary">Salvar</button>
			</div>
			<div class="col s6">
				<a [routerLink]="['/grupo-monitoramento']"
					class="btn btn-primary btn-listar-perfis">Listar</a>
			</div>
		</div>
	</form>
</div>