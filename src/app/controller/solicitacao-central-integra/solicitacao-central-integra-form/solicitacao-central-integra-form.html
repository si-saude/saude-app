<head>
<meta charset="utf-8">
</head>

<!-- Preload -->
<app-preload [msg]="msgPreload" [show]="showPreload"></app-preload>

<!-- Confirm Save -->
<app-confirm-save [show]="showConfirmSave" [msg]="msgConfirmSave"
	[goTo]="goTo"></app-confirm-save>

<div class="row form-container">
	<form #form="ngForm" class="col s12" (ngSubmit)="save()">

		<div class="row">

			<div class="input-field col s12">
				<div class="input-field col s8">
					<fieldset>
						<legend>
							Tipo da Solicitação <a
								class="btn-floating waves-effect waves-light green btn-add-fieldset"
								(click)="getTipoSolicitacoes()"> <i
								class="material-icons center-icon">cached</i>
							</a>
						</legend>
						<select name="tipoSolicitacao" class="browser-default"
							[(ngModel)]="solicitacao.tipoSolicitacao.id">
							<option disabled selected value="">Selecione um tipo de solicitação</option>
							<option *ngFor="let tipoSolicitacao of tipoSolicitacoes" value="{{tipoSolicitacao.id}}">{{tipoSolicitacao.nome}}</option>
						</select>
					</fieldset>
				</div>
				
				<div class="input-field col s4 checkbox">
					<input type="checkbox" id="solicitacaoCentralIntegra.concluido"
						[(ngModel)]="solicitacaoCentralIntegra.concluido"
						name="solicitacaoCentralIntegra.concluido">
					<label for="solicitacaoCentralIntegra.concluido">Concluido</label>
				</div>
			</div>
			
			<div class="input-field col s12">
				<label for="descricao">Descrição</label>
					<textarea class="materialize-textarea" id="descricao" 
						[(ngModel)]="solicitacao.descricao" name="solicitacao.descricao"></textarea>
			</div>
			
			<div class="input-field col s12">
				<div class="input-field col s8">
					<label for="cliente">cliente</label> <input required
						type="text" materialize="autocomplete" autocomplete="off"
						name="solicitacaoCentralIntegra.tarefa.cliente.pessoa.nome"
						[(ngModel)]="solicitacaoCentralIntegra.tarefa.cliente.pessoa.nome"
						(blur)="getEmpregado($event)"
						(ngModelChange)="selectEmpregadoByChave($event); selectEmpregado($event);"
						[materializeParams]="autocompleteEmpregado"> <input
						id="solicitacaoCentralIntegra.tarefa.cliente.pessoa.id" type="hidden"
						name="solicitacaoCentralIntegra.tarefa.cliente.pessoa.id"
						[(ngModel)]="solicitacaoCentralIntegra.tarefa.cliente.pessoa.id">
				</div>
			</div>
			
			<div class="row col s12">

				<div class="input-field col s4">
					<label for="inicio">Inicio</label>
					<my-date-picker name="inicio" [options]="myDatePickerOptions"
						[(ngModel)]="inicio" placeholder="inicio">
					</my-date-picker>
				</div>
				<div class="input-field col s4">
					<label for="prazo">Prazo</label>
					<my-date-picker name="prazo" [options]="myDatePickerOptions"
						[(ngModel)]="prazo" placeholder="Prazo">
					</my-date-picker>
				</div>
				
			</div>
			
		</div>

		<input id="id" name="id" type="hidden" [(ngModel)]="solicitacaoCentralIntegra.id">
		<input id="version" name="version" type="hidden"
			[(ngModel)]="solicitacaoCentralIntegra.version">

		<div class="mensagem">
			<app-mensagem-form *ngIf="verifyError" [color]="colorError"
				[msg]="msgError"></app-mensagem-form>
		</div>

		<div class='row row-btns'>
			<div class="col s6">
				<a [routerLink]="['/']" class="btn btn-primary btn-listar">Listar</a>
			</div>
			<div class="col s6">
				<button type="submit" class="btn btn-primary btn-salvar">Salvar</button>
			</div>
		</div>
	
	</form>
</div>

<div materialize [materializeParams]="toastParams"
	[materializeActions]="globalActions"></div>